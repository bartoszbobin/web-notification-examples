<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>Web Notification API showcase | Bartosz Bobin</title>


    <link rel="stylesheet" href="reveal-js/reveal.css" />
    <link rel="stylesheet" href="reveal-js/black.css" id="theme">

    <link rel="stylesheet" href="reveal-js/zenburn.css" />
    
    <link rel="stylesheet" href="style.css?1" />
    <script>
        navigator.serviceWorker.register('sw.js');

        function id(elementId, clickCallback) {
            return window.document.getElementById(elementId).addEventListener('click', clickCallback);
        }
    </script>
</head>
<body class="reveal">

<main class="slides">
    <section>
        <h2>Web Notification API</h2>
        <h4> examples</h4>
        <h6>Author @BartoszBobin</h6>
    </section>
    <section>
        <div class="col-sm-8">
<pre><code class="hljs">
new Notification('Notification Title', {
                  body: 'This notification have additional text and icon',
                 badge: 'sword.png',
                  icon: 'smile.png',
             timestamp: Date.now(),
                  data: {},
    requireInteraction: true,
               vibrate: [400, 300, 300, 800],
                 badge: 'sword.png',
                  body: 'Do you fill vibration?',
                   tag: 'group-A',
                 sound: 'sound.mp3'
});
</code></pre>
        </div>
        <div>

        </div>

    </section>
 <!--https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/BygptYClroM-->

        <section>
            <div class="col-sm-8">
                <h3>Do I have permissions?</h3>
                <p>We can easy check if user allow notification for our website by checking property:</p>
                <pre><code class="hljs">Notification.permission;</code></pre>
                <button type="button" id="do-i-have-permission" class="btn btn-info btn-lg">Try me!</button>
                <p>Possible values:</p>
                <ul class="list-unstyled">
                    <li><em>default</em> - there is no decision yet</li>
                    <li><em>granted</em> - user allow notification</li>
                    <li><em>denied</em> - user don't want to see our notification</li>
                </ul>
            </div>
            <script>
                id('do-i-have-permission', () => {
                    window.alert(Notification.permission);
                });
            </script>
        </section>

        <section>
            <div class="col-sm-8"><h3>Ask me about permissions</h3>
                <p>Before we show any notification to our user we need to ask him about permission:</p>
                <pre><code class="hljs">
Notification.requestPermission().then((result) => { });
                </code></pre>
                <button type="button" id="ask-me-about-permission" class="btn btn-info btn-lg">Try me!</button>

                <h3>!important: </h3>
                <p>Web browser will ask user about permission to show notification.
                    When user will take decision eg.: denied, web browser will not ask him again.</p>
            </div>
            <script>
                id('ask-me-about-permission', () => {
                    Notification.requestPermission().then((result) => {
                        window.alert('Notification Request : ' + result);
                    });
                });
            </script>
        </section>

        <section>
            <div class="col-sm-8"><h3>Say Hello!</h3>
                <p>Let's try simple notification</p>
                <pre><code class="hljs">
new Notification('Hi desktop user!', {
    badge: 'sword.png',
    icon: 'smile.png',
    image: 'smile-blue.png'
});
                </code></pre>

            </div>
            <div>
                <button type="button" id="desktop-say-hello" class="btn btn-info">Try on desktop!</button>
                <button type="button" id="mobile-say-hello" class="btn btn-warning">Try on mobile!</button>
            </div>
            <script>
                id('desktop-say-hello', () => {
                    new Notification('Hi desktop user!', {
                        badge: 'sword.png',
                        icon: 'smile.png',
                        image: 'smile-blue.png'
                    });
                });

                id('mobile-say-hello', () => {
                    navigator.serviceWorker.ready.then(function (registration) {
                        registration.showNotification('Hi mobile user!', {
                            badge: 'sword.png',
                            icon: 'smile.png',
                            image: 'smile-blue.png'
                        });
                    });
                });
            </script>
        </section>

        <section>
            <div class="col-sm-8"><h3>More extended example!</h3>
                <p>Let's add body text and icon to our notification...</p>
                <pre><code class="hljs">
new Notification('Extended notification', {
    body: 'This notification have additional text and icon',
    badge: 'sword.png',
    icon: 'smile.png',
    timestamp: Date.now()
});
                </code></pre>
            </div>
            <div>
                <button type="button" id="desktop-show-notification-with-more-options" class="btn btn-info">Try on
                    desktop!
                </button>
                <button type="button" id="mobile-show-notification-with-more-options" class="btn btn-warning">Try on
                    mobile!
                </button>
            </div>
            <script>
                id('desktop-show-notification-with-more-options', () => {
                    new Notification('Extended notification', {
                        body: 'This notification have additional text and icon',
                        badge: 'sword.png',
                        icon: 'smile.png',
                        timestamp: Date.now()
                    });
                });

                id('mobile-show-notification-with-more-options', () => {
                    navigator.serviceWorker.ready.then(function (registration) {
                        registration.showNotification('Extended notification', {
                            body: 'This notification have additional text and icon',
                            badge: 'sword.png',
                            icon: 'smile.png',
                            timestamp: Date.now()
                        });
                    });
                });
            </script>
        </section>

        <section>
            <div class="col-sm-8"><h3>With extra data and base64 icon</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas iaculis arcu ullamcorper, imperdiet
                    leo dignissim, sodales ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
                    posuere cubilia Curae; Nullam ac turpis ipsum. Vivamus nec eleifend ex. Etiam blandit tortor eget
                    ante euismod interdum. Sed vitae urna a tellus ullamcorper placerat. Fusce eu tortor placerat,
                    dapibus sem sed, laoreet elit. Suspendisse porttitor porttitor tortor, vitae condimentum nisi
                    gravida vitae. Phasellus tempus augue ut tellus vestibulum, id tempus sapien sagittis. Nam
                    vestibulum venenatis felis id tristique. Pellentesque eleifend rhoncus mi, congue sagittis diam
                    pharetra sed. Vestibulum sodales purus ac pharetra dignissim. Praesent ultricies molestie
                    tincidunt.</p>
            </div>
            <div>
                <button type="button" id="desktop-show-notification-with-extra-data" class="btn btn-info">Try on
                    desktop!
                </button>
                <button type="button" id="mobile-show-notification-with-extra-data" class="btn btn-warning">Try on
                    mobile!
                </button>
            </div>
        </section>

        <section>
            <div class="col-sm-8"><h3>Delay notification!</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas iaculis arcu ullamcorper, imperdiet
                    leo dignissim, sodales ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
                    posuere cubilia Curae; Nullam ac turpis ipsum. Vivamus nec eleifend ex. Etiam blandit tortor eget
                    ante euismod interdum. Sed vitae urna a tellus ullamcorper placerat. Fusce eu tortor placerat,
                    dapibus sem sed, laoreet elit. Suspendisse porttitor porttitor tortor, vitae condimentum nisi
                    gravida vitae. Phasellus tempus augue ut tellus vestibulum, id tempus sapien sagittis. Nam
                    vestibulum venenatis felis id tristique. Pellentesque eleifend rhoncus mi, congue sagittis diam
                    pharetra sed. Vestibulum sodales purus ac pharetra dignissim. Praesent ultricies molestie
                    tincidunt.</p>
            </div>
            <div>
                <button type="button" id="desktop-delayed-notification" class="btn btn-info">Try on desktop!</button>
                <button type="button" id="mobile-delayed-notification" class="btn btn-warning">Try on mobile!</button>
            </div>
        </section>

        <section>
            <div class="col-sm-8"><h3>Require interaction</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas iaculis arcu ullamcorper, imperdiet
                    leo dignissim, sodales ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
                    posuere cubilia Curae; Nullam ac turpis ipsum. Vivamus nec eleifend ex. Etiam blandit tortor eget
                    ante euismod interdum. Sed vitae urna a tellus ullamcorper placerat. Fusce eu tortor placerat,
                    dapibus sem sed, laoreet elit. Suspendisse porttitor porttitor tortor, vitae condimentum nisi
                    gravida vitae. Phasellus tempus augue ut tellus vestibulum, id tempus sapien sagittis. Nam
                    vestibulum venenatis felis id tristique. Pellentesque eleifend rhoncus mi, congue sagittis diam
                    pharetra sed. Vestibulum sodales purus ac pharetra dignissim. Praesent ultricies molestie
                    tincidunt.</p>
            </div>
            <div>
                <button type="button" id="desktop-require-interaction" class="btn btn-info">Try on desktop!</button>
                <button type="button" id="mobile-require-interaction" class="btn btn-warning">Try on mobile!</button>
            </div>
        </section>

        <section>
            <div class="col-sm-8"><h3>Notification events</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas iaculis arcu ullamcorper, imperdiet
                    leo dignissim, sodales ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
                    posuere cubilia Curae; Nullam ac turpis ipsum. Vivamus nec eleifend ex. Etiam blandit tortor eget
                    ante euismod interdum. Sed vitae urna a tellus ullamcorper placerat. Fusce eu tortor placerat,
                    dapibus sem sed, laoreet elit. Suspendisse porttitor porttitor tortor, vitae condimentum nisi
                    gravida vitae. Phasellus tempus augue ut tellus vestibulum, id tempus sapien sagittis. Nam
                    vestibulum venenatis felis id tristique. Pellentesque eleifend rhoncus mi, congue sagittis diam
                    pharetra sed. Vestibulum sodales purus ac pharetra dignissim. Praesent ultricies molestie
                    tincidunt.</p>
            </div>
            <div>
                <button type="button" id="desktop-notification-events" class="btn btn-info">Try on desktop!</button>
                <button type="button" id="mobile-notification-events" class="btn btn-warning">Try on mobile!</button>
            </div>
        </section>

        <section>
            <div class="col-sm-8"><h3>Notification with vibration and custom sound</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas iaculis arcu ullamcorper, imperdiet
                    leo dignissim, sodales ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
                    posuere cubilia Curae; Nullam ac turpis ipsum. Vivamus nec eleifend ex. Etiam blandit tortor eget
                    ante euismod interdum. Sed vitae urna a tellus ullamcorper placerat. Fusce eu tortor placerat,
                    dapibus sem sed, laoreet elit. Suspendisse porttitor porttitor tortor, vitae condimentum nisi
                    gravida vitae. Phasellus tempus augue ut tellus vestibulum, id tempus sapien sagittis. Nam
                    vestibulum venenatis felis id tristique. Pellentesque eleifend rhoncus mi, congue sagittis diam
                    pharetra sed. Vestibulum sodales purus ac pharetra dignissim. Praesent ultricies molestie
                    tincidunt.</p>
            </div>
            <div>
                <button type="button" id="desktop-notification-vibration-sound" class="btn btn-info">Try on desktop!
                </button>
                <button type="button" id="mobile-notification-vibration-sound" class="btn btn-warning">Try on mobile!
                </button>
            </div>
        </section>

        <section>
            <h3>Many notifications</h3>
            <div class="col-sm-8"><h3>without tagging</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas iaculis arcu ullamcorper, imperdiet
                    leo dignissim, sodales ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
                    posuere cubilia Curae; Nullam ac turpis ipsum. Vivamus nec eleifend ex. Etiam blandit tortor eget
                    ante euismod interdum. Sed vitae urna a tellus ullamcorper placerat. Fusce eu tortor placerat,
                    dapibus sem sed, laoreet elit. Suspendisse porttitor porttitor tortor, vitae condimentum nisi
                    gravida vitae. Phasellus tempus augue ut tellus vestibulum, id tempus sapien sagittis. Nam
                    vestibulum venenatis felis id tristique. Pellentesque eleifend rhoncus mi, congue sagittis diam
                    pharetra sed. Vestibulum sodales purus ac pharetra dignissim. Praesent ultricies molestie
                    tincidunt.</p>
            </div>
            <div>
                <button type="button" id="desktop-many-notifications-without-tag" class="btn btn-info">Try on desktop!
                </button>
                <button type="button" id="mobile-many-notifications-without-tag" class="btn btn-warning">Try on
                    mobile!
                </button>
            </div>
        </section>

        <section>
            <div class="col-sm-8"><h3>with tagging</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas iaculis arcu ullamcorper, imperdiet
                    leo dignissim, sodales ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
                    posuere cubilia Curae; Nullam ac turpis ipsum. Vivamus nec eleifend ex. Etiam blandit tortor eget
                    ante euismod interdum. Sed vitae urna a tellus ullamcorper placerat. Fusce eu tortor placerat,
                    dapibus sem sed, laoreet elit. Suspendisse porttitor porttitor tortor, vitae condimentum nisi
                    gravida vitae. Phasellus tempus augue ut tellus vestibulum, id tempus sapien sagittis. Nam
                    vestibulum venenatis felis id tristique. Pellentesque eleifend rhoncus mi, congue sagittis diam
                    pharetra sed. Vestibulum sodales purus ac pharetra dignissim. Praesent ultricies molestie
                    tincidunt.</p>
            </div>
            <div>
                <button type="button" id="desktop-many-notifications-with-tag" class="btn btn-info">Try on desktop!
                </button>
                <button type="button" id="mobile-many-notifications-with-tag" class="btn btn-warning">Try on mobile!
                </button>
            </div>
        </section>

        <section>
            <div class="col-sm-8"><h3>Custom actions</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas iaculis arcu ullamcorper, imperdiet
                    leo dignissim, sodales ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
                    posuere cubilia Curae; Nullam ac turpis ipsum. Vivamus nec eleifend ex. Etiam blandit tortor eget
                    ante euismod interdum. Sed vitae urna a tellus ullamcorper placerat. Fusce eu tortor placerat,
                    dapibus sem sed, laoreet elit. Suspendisse porttitor porttitor tortor, vitae condimentum nisi
                    gravida vitae. Phasellus tempus augue ut tellus vestibulum, id tempus sapien sagittis. Nam
                    vestibulum venenatis felis id tristique. Pellentesque eleifend rhoncus mi, congue sagittis diam
                    pharetra sed. Vestibulum sodales purus ac pharetra dignissim. Praesent ultricies molestie
                    tincidunt.</p>
            </div>
            <div>
                <button type="button" id="mobile-notifications-with-actions" class="btn btn-warning">Try on mobile!</button>
            </div>
        </section>
    </main>

<script src="reveal-js/head.min.js"></script>
<script src="reveal-js/reveal.min.js"></script>
<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'zoom', // none/fade/slide/convex/concave/zoom,
        dependencies: [
            { src: 'reveal-js/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
            { src: 'reveal-js/zoom.js', async: true }
        ]
    });

</script>
<script>
    // DESKTOP
    id('desktop-require-interaction', () => {
        new Notification('Require interaction', {
            body: 'This notification will never be auto hidden because it require your interaction',
            badge: 'sword.png',
            requireInteraction: true
        });
    });

    id('desktop-show-notification-with-extra-data', () => {
        var notification = new Notification('Notification with extra object data', {
            body: 'This notification have extra data',
            badge: 'sword.png',
            icon: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAApElEQVR42u3RAQ0AAAjDMO5fNCCDkC5z0HTVrisFCBABASIgQAQEiIAAAQJEQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAQECBAgAgJEQIAIyPcGFY7HnV2aPXoAAAAASUVORK5CYII=',
            data: {
                some: 'extra-data',
                2: true,
                array: ["x", true, 1]
            }
        });

        console.log('show-notification-with-more-data', notification.data);
    });

    id('desktop-delayed-notification', () => {
        setTimeout(() => {
            new Notification('Delayed notification', {
                body: 'This notification should be shown after 5 seconds!',
                badge: 'sword.png',
                icon: 'smile.png'
            });
        }, 5000);
    });

    id('desktop-notification-events', () => {
        var notification = new Notification('Notification events', {
            body: 'Remember to open console!',
            badge: 'sword.png',
            icon: 'smile.png'
        });

        notification.onclose = () => {
            console.log('notification-events', 'onclose');
        };

        notification.onclick = function (event) {
            console.log('notification-events', 'onclick');
            event.target.close(); // because not every browser close notification after click on them
        };

        notification.onshow = () => {
            console.log('notification-events', 'onshow');
        };

        notification.onerror = () => {
            console.log('notification-events', 'onerror');
        };
    });

    id('desktop-notification-vibration-sound', () => {
        new Notification('Notification with vibration and custom sound', {
            vibrate: [400, 300, 300, 800],
            badge: 'sword.png',
            body: 'Do you fill vibration?',
            sound: 'sound.mp3'
        });
    });

    id('desktop-many-notifications-without-tag', () => {
        for (var i = 1; i < 12; i++) {
            setTimeout(function (no) {
                return () => {
                    new Notification('Notification No. ' + no, {
                        badge: 'sword.png',
                        icon: 'smile-blue.png'
                    });
                }
            }(i), 1000 * i);
        }
    });

    id('desktop-many-notifications-with-tag', () => {
        for (var i = 1; i < 30; i++) {
            setTimeout(function (no) {
                return () => {
                    var group = (no % 2 == 0) ? 'A' : 'B';
                    new Notification('Tag Notification No. ' + no, {
                        tag: 'group-' + group,
                        badge: 'sword.png',
                        icon: group === 'A' ? 'smile-blue.png' : 'smile-red.png'
                    });
                }
            }(i), 1000 * i);
        }
    });


    /**
     * MOBILE
     */

    id('mobile-require-interaction', () => {
        navigator.serviceWorker.ready.then(function (registration) {
            registration.showNotification('Mobile Require interaction', {
                body: 'This notification will never be auto hidden because it require your interaction',
                badge: 'sword.png',
                requireInteraction: true
            });
        });
    });

    id('mobile-show-notification-with-extra-data', () => {
        navigator.serviceWorker.ready.then(function (registration) {
            registration.showNotification('Mobile - Notification with extra object data', {
                body: 'This notification have extra data',
                badge: 'sword.png',
                icon: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAApElEQVR42u3RAQ0AAAjDMO5fNCCDkC5z0HTVrisFCBABASIgQAQEiIAAAQJEQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAREQIAICBABASIgQAQECBAgAgJEQIAIyPcGFY7HnV2aPXoAAAAASUVORK5CYII=',
                data: {
                    some: 'extra-data',
                    2: true,
                    array: ["x", true, 1]
                }
            });
        });

        console.log('show-notification-with-more-data', notification.data);
    });

    id('mobile-delayed-notification', () => {
        setTimeout(() => {
            navigator.serviceWorker.ready.then(function (registration) {
                registration.showNotification('Mobile - Delayed notification', {
                    badge: 'sword.png'
                });
            });
        }, 5000);
    });

    id('mobile-notification-events', () => {
        navigator.serviceWorker.ready.then(function (registration) {
            registration.showNotification('Mobile - Notification events', {
                body: 'Remember to open console!',
                badge: 'sword.png',
                icon: 'smile.png',
                onclose: () => {
                    console.log('notification-events', 'onclose');
                },
                onclick: function (event) {
                    console.log('notification-events', 'onclick');
                    event.target.close(); // because not every browser close notification after click on them
                },
                onshow: () => {
                    console.log('notification-events', 'onshow');
                },
                onerror: () => {
                    console.log('notification-events', 'onerror');
                }
            });
        });
    });

    id('mobile-notification-vibration-sound', () => {
        navigator.serviceWorker.ready.then(function (registration) {
            registration.showNotification('Mobile - Notification with vibration and custom sound', {
                badge: 'sword.png',
                vibrate: [400, 300, 300, 800],
                body: 'Do you fill vibration?',
                sound: 'sound.mp3'
            });
        });
    });

    id('mobile-many-notifications-without-tag', () => {
        navigator.serviceWorker.ready.then(function (registration) {
            for (var i = 1; i < 12; i++) {
                setTimeout(function (no) {
                    return () => {
                        registration.showNotification('Mobile - Notification No. ' + no, {
                            badge: 'sword.png',
                            icon: 'smile-blue.png'
                        });
                    }
                }(i), 1000 * i);
            }
        });
    });

    id('mobile-many-notifications-with-tag', () => {
        navigator.serviceWorker.ready.then(function (registration) {
            for (var i = 1; i < 30; i++) {
                setTimeout(function (no) {
                    return () => {
                        var group = (no % 2 == 0) ? 'A' : 'B';
                        registration.showNotification('Mobile - Tag Notification No. ' + no, {
                            tag: 'group-' + group,
                            badge: 'sword.png',
                            icon: group === 'A' ? 'smile-blue.png' : 'smile-red.png'
                        });
                    }
                }(i), 1000 * i);
            }
        });
    });

    id('mobile-notifications-with-actions', () => {
        navigator.serviceWorker.ready.then(function (registration) {
            registration.showNotification('Mobile - Notification with call to action buttons', {
                badge: 'sword.png',
                actions: [
                    {action: 'action-1', title: '1st action', icon: 'smile-blue.png'},
                    {action: 'action-2', title: '2nd action', icon: 'smile-red.png'},
                    {action: 'action-3', title: '3rd action', icon: 'smile.png'}
                ],
                icon: 'smile.png'
            });
        });
    });
</script>

</body>
</html>
